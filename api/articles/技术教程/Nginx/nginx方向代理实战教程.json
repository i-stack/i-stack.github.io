{"title":"Nginx反向代理实战教程","slug":"技术教程/Nginx/nginx方向代理实战教程","date":"2023-02-26T05:48:32.000Z","updated":"2023-08-10T16:08:13.057Z","comments":true,"path":"api/articles/技术教程/Nginx/nginx方向代理实战教程.json","excerpt":null,"covers":null,"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><h2 id=\"解决-https-页面加载-http-资源报错的方法\"><a href=\"#解决-https-页面加载-http-资源报错的方法\" class=\"headerlink\" title=\"解决 https 页面加载 http 资源报错的方法\"></a>解决 <code>https</code> 页面加载 <code>http</code> 资源报错的方法</h2><p>1、如果http资源可以修改，那么让http支持https这是最简单方便的方式；</p>\n<p>2、如果http资源是外部的，那么nginx反向代理可以试一下。</p>\n<h2 id=\"nginx反向代理设置\"><a href=\"#nginx反向代理设置\" class=\"headerlink\" title=\"nginx反向代理设置\"></a>nginx反向代理设置</h2><p>举例说明：要在个人网站：<code>https://www.freelibrary.top</code> 中加载 <code>http://wp.birdpaper.com.cn/intf/GetListByCategory</code> 的数据。配置如下</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server</span><br><span class=\"line\">{</span><br><span class=\"line\">    listen 80;</span><br><span class=\"line\">    listen 443 ssl http2;</span><br><span class=\"line\">    server_name freelibrary.top www.freelibrary.top;</span><br><span class=\"line\">    index index.php index.html index.htm default.php default.htm default.html;</span><br><span class=\"line\">    root /www/wwwroot/freelibrary/;</span><br><span class=\"line\"></span><br><span class=\"line\">    location /wpGetListByCategory { // 这里配置反向代理</span><br><span class=\"line\">        proxy_pass http://wp.birdpaper.com.cn/intf/GetListByCategory;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n\n<p>上面配置好之后，调用 <code>http://wp.birdpaper.com.cn/intf/GetListByCategory?abc=</code> 接口修改为 <code>https://www.freelibrary.top/wpGetListByCategory?abc=</code>即可。</p>\n<p>对，没看错，这就完了～</p>\n<h2 id=\"成果\"><a href=\"#成果\" class=\"headerlink\" title=\"成果\"></a>成果</h2><p><a href=\"https://freelibrary.top/wallpaper\">https://freelibrary.top/wallpaper</a></p>\n","more":"<h2 id=\"解决-https-页面加载-http-资源报错的方法\"><a href=\"#解决-https-页面加载-http-资源报错的方法\" class=\"headerlink\" title=\"解决 https 页面加载 http 资源报错的方法\"></a>解决 <code>https</code> 页面加载 <code>http</code> 资源报错的方法</h2><p>1、如果http资源可以修改，那么让http支持https这是最简单方便的方式；</p>\n<p>2、如果http资源是外部的，那么nginx反向代理可以试一下。</p>\n<h2 id=\"nginx反向代理设置\"><a href=\"#nginx反向代理设置\" class=\"headerlink\" title=\"nginx反向代理设置\"></a>nginx反向代理设置</h2><p>举例说明：要在个人网站：<code>https://www.freelibrary.top</code> 中加载 <code>http://wp.birdpaper.com.cn/intf/GetListByCategory</code> 的数据。配置如下</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    listen 80;</span><br><span class=\"line\">    listen 443 ssl http2;</span><br><span class=\"line\">    server_name freelibrary.top www.freelibrary.top;</span><br><span class=\"line\">    index index.php index.html index.htm default.php default.htm default.html;</span><br><span class=\"line\">    root /www/wwwroot/freelibrary/;</span><br><span class=\"line\"></span><br><span class=\"line\">    location /wpGetListByCategory &#123; // 这里配置反向代理</span><br><span class=\"line\">        proxy_pass http://wp.birdpaper.com.cn/intf/GetListByCategory;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面配置好之后，调用 <code>http://wp.birdpaper.com.cn/intf/GetListByCategory?abc=</code> 接口修改为 <code>https://www.freelibrary.top/wpGetListByCategory?abc=</code>即可。</p>\n<p>对，没看错，这就完了～</p>\n<h2 id=\"成果\"><a href=\"#成果\" class=\"headerlink\" title=\"成果\"></a>成果</h2><p><a href=\"https://freelibrary.top/wallpaper\">https://freelibrary.top/wallpaper</a></p>\n","categories":[{"name":"技术教程","path":"api/categories/技术教程.json"}],"tags":[{"name":"Nginx","path":"api/tags/Nginx.json"}]}